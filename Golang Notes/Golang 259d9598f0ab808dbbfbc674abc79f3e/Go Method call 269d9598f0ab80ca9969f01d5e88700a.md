# Go Method call

# **Go Method & Function Flow Diagram**

```
                     ┌───────────────────┐
                     │   Package Function │
                     │   (no receiver)    │
                     └─────────┬─────────┘
                               │ called via
                               │ package name
                               ▼
                     ┌───────────────────┐
                     │  Constructor       │
                     │  (NewType())       │
                     └─────────┬─────────┘
                               │ returns pointer to
                               ▼
                     ┌───────────────────┐
                     │   Struct Instance  │
                     │   CustomerService  │
                     └─────────┬─────────┘
                               │ can call
                               ▼
                     ┌───────────────────┐
                     │  Pointer Method    │
                     │  (*Customer)       │
                     └─────────┬─────────┘
                               │ can call
                               ▼
                     ┌───────────────────┐
                     │ Value Method       │
                     │ (Customer copy)    │
                     └─────────┬─────────┘
                               │ internal calls
                               ▼
                     ┌───────────────────┐
                     │ Another Method     │
                     │ on same struct     │
                     └───────────────────┘

```

---

### **How to Read This Flow**

1. **Start at `main()`**:
    - Call a **package-level function** or **constructor** first.
2. **Constructor (`NewType`)**:
    - Returns pointer → instance of the struct.
3. **Instance**:
    - Use instance to call **pointer or value methods**.
4. **Pointer Method (`Customer`)**:
    - Can modify original struct.
5. **Value Method (`Customer`)**:
    - Works on a copy → no modification.
6. **Method calling another method**:
    - Methods can chain internal calls to each other.

---

### ✅ **Real Example in Customer App**

```
main()
  │
  ▼
NewCustomerService()   (constructor returns *CustomerServiceImpl)
  │
  ▼
customerService.PrintCustomer(1)  (pointer method)
  │
  ▼
customerService.GetCustomer(1)    (internal method call)
  │
  ▼
orderService.TotalOrderAmount(1)  (calls method from another package)
  │
  ▼
Print output to console

```

---

### ✅ **Tips for Debugging Flow**

- Start at `main()`.
- Follow constructor → instance → pointer/value methods.
- Trace any **internal method calls** or calls across packages.
- Use logs to see step-by-step execution.

## **1️⃣ Package-level function (no receiver)**

```go
package utils

import "fmt"

func Log(message string) {
    fmt.Println("[LOG]:", message)
}

```

**How to call:**

```go
import "my-app/pkg/utils"

func main() {
    utils.Log("This is a log message")
}

```

**✅ Notes:**

- No instance needed.
- Called via **package name**.
- Can’t access struct fields.

---

## **2️⃣ Method with value receiver**

```go
package models

type Customer struct {
    Name string
    Balance float64
}

func (c Customer) ShowBalance() {
    fmt.Println("Balance:", c.Balance)
}

```

**How to call:**

```go
cust := models.Customer{Name: "Alice", Balance: 1000}
cust.ShowBalance()

```

**✅ Notes:**

- `c Customer` → receives a **copy** of the struct.
- Changes inside the method **don’t affect the original**.

---

## **3️⃣ Method with pointer receiver**

```go
func (c *Customer) AddBalance(amount float64) {
    c.Balance += amount
}

```

**How to call:**

```go
cust := models.Customer{Name: "Alice", Balance: 1000}
cust.AddBalance(500)         // Go automatically takes address
(&cust).AddBalance(500)      // Explicit pointer

```

**✅ Notes:**

- `Customer` → receives **pointer to original struct**.
- Can modify the original object.
- More memory efficient for large structs.

---

## **4️⃣ Constructor-like function (package-level, returns pointer)**

```go
func NewCustomer(name string, balance float64) *Customer {
    return &Customer{Name: name, Balance: balance}
}

```

**How to call:**

```go
cust := models.NewCustomer("Bob", 500)
cust.AddBalance(200)

```

**✅ Notes:**

- No receiver, called via **package name**.
- Returns pointer to struct → can immediately call pointer methods.
- Common pattern in Go to initialize structs.

---

## **5️⃣ Method calling another method in same struct**

```go
func (c *Customer) DepositAndShow(amount float64) {
    c.AddBalance(amount)   // call another method
    c.ShowBalance()
}

```

**How to call:**

```go
cust := models.NewCustomer("Alice", 1000)
cust.DepositAndShow(500)

```

**✅ Notes:**

- Internal method calls can use either pointer or value receiver depending on the method.
- Simplifies chaining operations.

---

### **Quick Summary Table**

| Type | Receiver | How to call | Modifies original? |
| --- | --- | --- | --- |
| Package function | none | `package.Func()` | No |
| Method (value receiver) | `c Customer` | `instance.Method()` | No |
| Method (pointer receiver) | `c *Customer` | `instance.Method()` or `(&instance).Method()` | Yes |
| Constructor function | none | `package.NewType()` | Returns pointer → can modify original |
| Method calling another method | value or pointer | `c.Method2()` inside Method1 | Depends on receiver type |

# 🟢 **Go Methods & Functions – Cheat Sheet**

---

## **1️⃣ Package-level Function (No Receiver)**

```go
package utils

func Log(message string) {
    fmt.Println("[LOG]:", message)
}

```

**Call:**

```go
utils.Log("Message")

```

**Notes:**

- No struct instance needed.
- Called via **package name**.
- Can’t access struct fields.

---

## **2️⃣ Method with Value Receiver**

```go
type Customer struct {
    Name    string
    Balance float64
}

func (c Customer) ShowBalance() {
    fmt.Println("Balance:", c.Balance)
}

```

**Call:**

```go
cust := Customer{Name: "Alice", Balance: 1000}
cust.ShowBalance()

```

**Notes:**

- `c Customer` → copy of struct.
- Changes **do not affect original** struct.

---

## **3️⃣ Method with Pointer Receiver**

```go
func (c *Customer) AddBalance(amount float64) {
    c.Balance += amount
}

```

**Call:**

```go
cust := Customer{Name: "Alice", Balance: 1000}
cust.AddBalance(500)       // Go converts to pointer automatically
(&cust).AddBalance(500)    // Explicit pointer

```

**Notes:**

- `Customer` → points to original struct.
- Modifies original object.
- Efficient for large structs.

---

## **4️⃣ Constructor-like Function (Returns Pointer)**

```go
func NewCustomer(name string, balance float64) *Customer {
    return &Customer{Name: name, Balance: balance}
}

```

**Call:**

```go
cust := NewCustomer("Bob", 500)
cust.AddBalance(200)

```

**Notes:**

- Package-level function → called via package.
- Returns pointer → immediately usable for pointer methods.
- Idiomatic way to initialize structs in Go.

---

## **5️⃣ Method Calling Another Method**

```go
func (c *Customer) DepositAndShow(amount float64) {
    c.AddBalance(amount)   // call another method
    c.ShowBalance()
}

```

**Call:**

```go
cust := NewCustomer("Alice", 1000)
cust.DepositAndShow(500)

```

**Notes:**

- Methods can call other methods of the same struct.
- Works with both value or pointer receivers depending on method type.
- Useful for chaining operations.

---

## **6️⃣ Quick Reference Table**

| Type | Receiver | How to Call | Modifies Original? |
| --- | --- | --- | --- |
| Package function | none | `package.Func()` | ❌ |
| Method (value) | `c Customer` | `instance.Method()` | ❌ |
| Method (pointer) | `c *Customer` | `instance.Method()` or `(&instance).Method()` | ✅ |
| Constructor function | none | `package.NewType()` | ✅ (returns pointer) |
| Method calling another method | value/pointer | `c.Method2()` inside Method1 | Depends on receiver |

---

### ✅ **Tips**

- Pointer receivers → always use when struct is large or needs modification.
- Value receivers → fine for read-only operations.
- Constructor functions (`NewType`) → standard Go practice to initialize and return a pointer.