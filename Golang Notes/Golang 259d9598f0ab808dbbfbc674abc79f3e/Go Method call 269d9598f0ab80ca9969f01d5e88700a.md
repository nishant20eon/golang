# Go Method call

# **Go Method & Function Flow Diagram**

```
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   Package Function â”‚
                     â”‚   (no receiver)    â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ called via
                               â”‚ package name
                               â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚  Constructor       â”‚
                     â”‚  (NewType())       â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ returns pointer to
                               â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   Struct Instance  â”‚
                     â”‚   CustomerService  â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ can call
                               â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚  Pointer Method    â”‚
                     â”‚  (*Customer)       â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ can call
                               â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ Value Method       â”‚
                     â”‚ (Customer copy)    â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ internal calls
                               â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ Another Method     â”‚
                     â”‚ on same struct     â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

### **How to Read This Flow**

1. **Start at `main()`**:
    - Call a **package-level function** or **constructor** first.
2. **Constructor (`NewType`)**:
    - Returns pointer â†’ instance of the struct.
3. **Instance**:
    - Use instance to call **pointer or value methods**.
4. **Pointer Method (`Customer`)**:
    - Can modify original struct.
5. **Value Method (`Customer`)**:
    - Works on a copy â†’ no modification.
6. **Method calling another method**:
    - Methods can chain internal calls to each other.

---

### âœ… **Real Example in Customer App**

```
main()
  â”‚
  â–¼
NewCustomerService()   (constructor returns *CustomerServiceImpl)
  â”‚
  â–¼
customerService.PrintCustomer(1)  (pointer method)
  â”‚
  â–¼
customerService.GetCustomer(1)    (internal method call)
  â”‚
  â–¼
orderService.TotalOrderAmount(1)  (calls method from another package)
  â”‚
  â–¼
Print output to console

```

---

### âœ… **Tips for Debugging Flow**

- Start at `main()`.
- Follow constructor â†’ instance â†’ pointer/value methods.
- Trace any **internal method calls** or calls across packages.
- Use logs to see step-by-step execution.

## **1ï¸âƒ£ Package-level function (no receiver)**

```go
package utils

import "fmt"

func Log(message string) {
    fmt.Println("[LOG]:", message)
}

```

**How to call:**

```go
import "my-app/pkg/utils"

func main() {
    utils.Log("This is a log message")
}

```

**âœ… Notes:**

- No instance needed.
- Called via **package name**.
- Canâ€™t access struct fields.

---

## **2ï¸âƒ£ Method with value receiver**

```go
package models

type Customer struct {
    Name string
    Balance float64
}

func (c Customer) ShowBalance() {
    fmt.Println("Balance:", c.Balance)
}

```

**How to call:**

```go
cust := models.Customer{Name: "Alice", Balance: 1000}
cust.ShowBalance()

```

**âœ… Notes:**

- `c Customer` â†’ receives a **copy** of the struct.
- Changes inside the method **donâ€™t affect the original**.

---

## **3ï¸âƒ£ Method with pointer receiver**

```go
func (c *Customer) AddBalance(amount float64) {
    c.Balance += amount
}

```

**How to call:**

```go
cust := models.Customer{Name: "Alice", Balance: 1000}
cust.AddBalance(500)         // Go automatically takes address
(&cust).AddBalance(500)      // Explicit pointer

```

**âœ… Notes:**

- `Customer` â†’ receives **pointer to original struct**.
- Can modify the original object.
- More memory efficient for large structs.

---

## **4ï¸âƒ£ Constructor-like function (package-level, returns pointer)**

```go
func NewCustomer(name string, balance float64) *Customer {
    return &Customer{Name: name, Balance: balance}
}

```

**How to call:**

```go
cust := models.NewCustomer("Bob", 500)
cust.AddBalance(200)

```

**âœ… Notes:**

- No receiver, called via **package name**.
- Returns pointer to struct â†’ can immediately call pointer methods.
- Common pattern in Go to initialize structs.

---

## **5ï¸âƒ£ Method calling another method in same struct**

```go
func (c *Customer) DepositAndShow(amount float64) {
    c.AddBalance(amount)   // call another method
    c.ShowBalance()
}

```

**How to call:**

```go
cust := models.NewCustomer("Alice", 1000)
cust.DepositAndShow(500)

```

**âœ… Notes:**

- Internal method calls can use either pointer or value receiver depending on the method.
- Simplifies chaining operations.

---

### **Quick Summary Table**

| Type | Receiver | How to call | Modifies original? |
| --- | --- | --- | --- |
| Package function | none | `package.Func()` | No |
| Method (value receiver) | `c Customer` | `instance.Method()` | No |
| Method (pointer receiver) | `c *Customer` | `instance.Method()` or `(&instance).Method()` | Yes |
| Constructor function | none | `package.NewType()` | Returns pointer â†’ can modify original |
| Method calling another method | value or pointer | `c.Method2()` inside Method1 | Depends on receiver type |

# ğŸŸ¢ **Go Methods & Functions â€“ Cheat Sheet**

---

## **1ï¸âƒ£ Package-level Function (No Receiver)**

```go
package utils

func Log(message string) {
    fmt.Println("[LOG]:", message)
}

```

**Call:**

```go
utils.Log("Message")

```

**Notes:**

- No struct instance needed.
- Called via **package name**.
- Canâ€™t access struct fields.

---

## **2ï¸âƒ£ Method with Value Receiver**

```go
type Customer struct {
    Name    string
    Balance float64
}

func (c Customer) ShowBalance() {
    fmt.Println("Balance:", c.Balance)
}

```

**Call:**

```go
cust := Customer{Name: "Alice", Balance: 1000}
cust.ShowBalance()

```

**Notes:**

- `c Customer` â†’ copy of struct.
- Changes **do not affect original** struct.

---

## **3ï¸âƒ£ Method with Pointer Receiver**

```go
func (c *Customer) AddBalance(amount float64) {
    c.Balance += amount
}

```

**Call:**

```go
cust := Customer{Name: "Alice", Balance: 1000}
cust.AddBalance(500)       // Go converts to pointer automatically
(&cust).AddBalance(500)    // Explicit pointer

```

**Notes:**

- `Customer` â†’ points to original struct.
- Modifies original object.
- Efficient for large structs.

---

## **4ï¸âƒ£ Constructor-like Function (Returns Pointer)**

```go
func NewCustomer(name string, balance float64) *Customer {
    return &Customer{Name: name, Balance: balance}
}

```

**Call:**

```go
cust := NewCustomer("Bob", 500)
cust.AddBalance(200)

```

**Notes:**

- Package-level function â†’ called via package.
- Returns pointer â†’ immediately usable for pointer methods.
- Idiomatic way to initialize structs in Go.

---

## **5ï¸âƒ£ Method Calling Another Method**

```go
func (c *Customer) DepositAndShow(amount float64) {
    c.AddBalance(amount)   // call another method
    c.ShowBalance()
}

```

**Call:**

```go
cust := NewCustomer("Alice", 1000)
cust.DepositAndShow(500)

```

**Notes:**

- Methods can call other methods of the same struct.
- Works with both value or pointer receivers depending on method type.
- Useful for chaining operations.

---

## **6ï¸âƒ£ Quick Reference Table**

| Type | Receiver | How to Call | Modifies Original? |
| --- | --- | --- | --- |
| Package function | none | `package.Func()` | âŒ |
| Method (value) | `c Customer` | `instance.Method()` | âŒ |
| Method (pointer) | `c *Customer` | `instance.Method()` or `(&instance).Method()` | âœ… |
| Constructor function | none | `package.NewType()` | âœ… (returns pointer) |
| Method calling another method | value/pointer | `c.Method2()` inside Method1 | Depends on receiver |

---

### âœ… **Tips**

- Pointer receivers â†’ always use when struct is large or needs modification.
- Value receivers â†’ fine for read-only operations.
- Constructor functions (`NewType`) â†’ standard Go practice to initialize and return a pointer.